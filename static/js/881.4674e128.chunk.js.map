{"version":3,"file":"static/js/881.4674e128.chunk.js","mappings":"4LAAA,IAAMA,EAAO,+BACPC,EAAO,qN,6ICAb,EAA4B,0BAA5B,EAA+D,uBAA/D,EAAkG,0BAAlG,EAAwI,0BAAxI,EAA4O,sBAA5O,EAA8Q,0BAA9Q,EAAoT,0B,SCwGpT,EAlGe,WACb,OAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAqBC,aAAaC,QAAQ,iBAChD,GAA0CC,EAAAA,EAAAA,UACxCL,EAAaM,IAAI,SAAWJ,GAAsB,IADpD,eAAOK,EAAP,KAAsBC,EAAtB,KAGA,GAA0CH,EAAAA,EAAAA,UAAS,IAAnD,eAAOI,EAAP,KAAsBC,EAAtB,KACA,GAA0CL,EAAAA,EAAAA,UAAS,IAAnD,eAAOM,EAAP,KAAsBC,EAAtB,MAEAC,EAAAA,EAAAA,YAAU,WACJN,GAAiBA,IAAkBI,GACrCG,EAAaP,EAGhB,GAAE,CAACA,EAAeI,KAEnBE,EAAAA,EAAAA,YAAU,WACRV,aAAaY,QAAQ,gBAAiBR,EACvC,GAAE,CAACA,IAEJ,IAAMS,EAAe,WACnBJ,EAAiBL,GACjBU,EAAiBV,EAClB,EAEKO,EAAY,mCAAG,wGAEXI,EAAU,CACdC,OAAQ,MACRC,IAAI,GAAD,OAAKvB,EAAAA,EAAL,iBACHwB,OAAQ,CACNC,MAAOf,EACPgB,SAAU,SAEZC,QAAS,CACPC,OAAQ,mBACRC,cAAc,UAAD,OAAY5B,EAAAA,KAXZ,SAeE6B,EAAAA,EAAAA,QAAcT,GAfhB,OAeXU,EAfW,OAgBXC,EAASD,EAAKE,KAAKC,QACzBrB,EAAiBmB,GACjBjB,EAAiBL,GAlBA,kDAoBjByB,QAAQC,IAAR,MApBiB,0DAAH,qDAwBZhB,EAAmB,SAAAiB,GAEvBjC,EAD4B,KAATiC,EAAc,CAAEA,KAAMA,GAAS,CAAC,EAEpD,EAYD,OACE,iBAAKC,UAAWC,EAAhB,WACE,eAAID,UAAWC,EAAf,qBACA,iBAAKD,UAAWC,EAAhB,WACE,kBACEC,KAAK,OACLC,YAAY,aACZC,MAAOhC,EACPiC,SAlBkB,SAAAC,GACxBjC,EAAiBiC,EAAEC,OAAOH,MAC3B,EAiBOI,UAfc,SAAAF,GACN,UAAVA,EAAEG,KACJ5B,GAEH,EAYOmB,UAAWC,KAGb,mBAAQS,QAAS7B,EAAcmB,UAAWC,EAA1C,wBAIF,wBACG3B,EAAcqC,KAAI,SAAAC,GAAK,OACtB,eAAmBZ,UAAWC,EAA9B,UACE,SAAC,KAAD,CACEY,GAAE,kBAAaD,EAAME,IACrBC,MAAO,CAAEC,KAAK,iBAAD,OAAmB5C,IAChC4B,UAAWC,EAHb,SAKGW,EAAMK,SANFL,EAAME,GADO,QAc/B,C","sources":["api/config.js","webpack://goit-react-hw-05-movies/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.jsx"],"sourcesContent":["const API_URL = `https://api.themoviedb.org/3`;\nconst API_KEY = `eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiMDgwNzYwYjIzMTI4OWI5NmU0ODE1YzYwNDQ1MzM5ZCIsInN1YiI6IjY0YWMwYzYzZTI0YjkzMDBlMzI3YThhNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LgN-PRKOtSLevLnOVfPIZ949JuxtZF7KWHhbTGJNx_E`;\n\nexport { API_URL, API_KEY };","// extracted by mini-css-extract-plugin\nexport default {\"boxMovies\":\"Movies_boxMovies__Hijky\",\"search\":\"Movies_search__VjLZn\",\"titleHome\":\"Movies_titleHome__aHuXE\",\"itemMovie\":\"Movies_itemMovie__C74R-\",\"text-shadow-drop-center\":\"Movies_text-shadow-drop-center__utvKw\",\"input\":\"Movies_input__KrUqs\",\"btnSearch\":\"Movies_btnSearch__OTpvi\",\"textColor\":\"Movies_textColor__l-2Sz\"};","import React, { useState, useEffect } from 'react';\nimport { NavLink, useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\n\nimport { API_URL, API_KEY } from '../../api/config';\nimport style from './Movies.module.css';\n\nconst Movies = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const savedSearchRequest = localStorage.getItem('searchRequest');\n  const [searchRequest, setSearchRequest] = useState(\n    searchParams.get('name') || savedSearchRequest || ''\n  );\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchedQuery, setSearchedQuery] = useState('');\n\n  useEffect(() => {\n    if (searchRequest && searchRequest !== searchedQuery) {\n      handleSearch(searchRequest);\n    }\n    // eslint-disable-next-line\n  }, [searchRequest, searchedQuery]);\n\n  useEffect(() => {\n    localStorage.setItem('searchRequest', searchRequest);\n  }, [searchRequest]);\n\n  const handleSubmit = () => {\n    setSearchedQuery(searchRequest);\n    updateQueryMovie(searchRequest);\n  };\n\n  const handleSearch = async () => {\n    try {\n      const options = {\n        method: 'GET',\n        url: `${API_URL}/search/movie`,\n        params: {\n          query: searchRequest,\n          language: 'en-US',\n        },\n        headers: {\n          accept: 'application/json',\n          Authorization: `Bearer ${API_KEY}`,\n        },\n      };\n\n      const resp = await axios.request(options);\n      const movies = resp.data.results;\n      setSearchResults(movies);\n      setSearchedQuery(searchRequest);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const updateQueryMovie = name => {\n    const nextParams = name !== '' ? { name: name } : {};\n    setSearchParams(nextParams);\n  };\n\n  const handleInputChange = e => {\n    setSearchRequest(e.target.value);\n  };\n\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      handleSubmit();\n    }\n  };\n\n  return (\n    <div className={style.boxMovies}>\n      <h2 className={style.titleHome}>Movies</h2>\n      <div className={style.search}>\n        <input\n          type=\"text\"\n          placeholder=\"Enter name\"\n          value={searchRequest}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          className={style.input}\n        />\n\n        <button onClick={handleSubmit} className={style.btnSearch}>\n          Search\n        </button>\n      </div>\n      <ul>\n        {searchResults.map(movie => (\n          <li key={movie.id} className={style.itemMovie}>\n            <NavLink\n              to={`/movies/${movie.id}`}\n              state={{ from: `/movies?query=${searchRequest}` }}\n              className={style.textColor}\n            >\n              {movie.title}\n            </NavLink>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Movies;\n"],"names":["API_URL","API_KEY","useSearchParams","searchParams","setSearchParams","savedSearchRequest","localStorage","getItem","useState","get","searchRequest","setSearchRequest","searchResults","setSearchResults","searchedQuery","setSearchedQuery","useEffect","handleSearch","setItem","handleSubmit","updateQueryMovie","options","method","url","params","query","language","headers","accept","Authorization","axios","resp","movies","data","results","console","log","name","className","style","type","placeholder","value","onChange","e","target","onKeyDown","key","onClick","map","movie","to","id","state","from","title"],"sourceRoot":""}